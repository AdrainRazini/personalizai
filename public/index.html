<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="UTF-8" />
  <title>Personalizai</title>
  <link rel="stylesheet" href="css/style.css">
    <link rel="shortcut icon" href="img/favicon/personalizai.ico" type="image/x-icon">
</head>
<body>

  <header>
    <nav class="nav-links" id="navMenu">
      <a href="#">‚òÖ Destaques</a>
      <a href="#">Home</a>
      <a href="#">Loja</a>
      <a href="#">Sobre</a>
      <a href="#">Contato</a>
      <a href="#"><i class="fas fa-shopping-cart"></i> 0 item</a>
    </nav>
  </header>

  <h1>üõí Produtos em Destaque</h1>

  <div style="max-width: 1000px; margin: auto; display: flex; gap: 1rem; flex-wrap: wrap; justify-content: center; margin-bottom: 1rem;">
    <input type="text" id="pesquisa" placeholder="üîç Buscar por nome ou c√≥digo..." style="padding: 0.5rem; width: 250px; border-radius: 6px; border: 1px solid #ccc;">
    
    <select id="filtroCategoria" style="padding: 0.5rem; border-radius: 6px; border: 1px solid #ccc;">
      <option value="">Todas as categorias</option>
    </select>
  </div>

  <div class="produtos-grid" id="produtos-grid">Carregando...</div>

  <script type="module" src="js/firebase.js"></script>
  <script type="module">
  import { initializeApp } from "https://www.gstatic.com/firebasejs/11.10.0/firebase-app.js";
  import { getAuth, onAuthStateChanged } from "https://www.gstatic.com/firebasejs/11.10.0/firebase-auth.js";
  import { getFirestore, doc, getDoc } from "https://www.gstatic.com/firebasejs/11.5.0/firebase-firestore.js";

  const firebaseConfig = {
    apiKey: "AIzaSyBRrvG3NIL_SdUIRTslSOzKG-B9lmH8LaA",
    authDomain: "personalizai-login-data.firebaseapp.com",
    projectId: "personalizai-login-data",
    storageBucket: "personalizai-login-data.appspot.com",
    messagingSenderId: "1044986495943",
    appId: "1:1044986495943:web:21db46ad8b5a8694700fe2",
    measurementId: "G-FKL4MNFS4E"
  };

  const app = initializeApp(firebaseConfig);
  const db = getFirestore(app);
  const auth = getAuth(app);

  onAuthStateChanged(auth, async (user) => {
    if (!user) return;

    try {
      const docRef = doc(db, "users", user.email);
      const docSnap = await getDoc(docRef);

      if (docSnap.exists() && docSnap.data().role === "admin") {
        const adminLinks = document.createElement("div");
        adminLinks.style.textAlign = "center";
        adminLinks.style.margin = "2rem 0";

        adminLinks.innerHTML = `
          <hr style="margin-bottom: 1rem;">
          <p><strong>√Årea do Administrador</strong></p>
          <a href="produtos.html"><button style="margin: 0.5rem;">üì¶ Gerenciar Produtos</button></a>
          <a href="adicionar.html"><button style="margin: 0.5rem;">‚ûï Novo Produto</button></a>
        `;

        document.body.appendChild(adminLinks);
      }
    } catch (err) {
      console.error("Erro ao verificar role do usu√°rio:", err);
    }
  });
</script>

  <script type="module" src="js/error.js"></script>
</body>
</html>
